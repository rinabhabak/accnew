<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_GoogleTagManager
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

$helper = $this->helper('Mageplaza\GoogleTagManager\Helper\Data');
if ($block->checkConditionShowPage()):?>
    <!-- Google Tag Manager (noscript) Added by Mageplaza-->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=<?php echo $helper->getTagId(); ?>"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <?php if (count($block->getPageInfo())): ?>
        <?php $dataLayerObject = json_encode($block->getPageInfo()); ?>
        <script>
            dataLayer.push(<?php echo $dataLayerObject; ?>);
        </script>
    <?php endif; ?>
<?php endif; ?>
